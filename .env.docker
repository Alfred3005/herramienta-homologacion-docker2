# Configuración de Entorno para Docker - Sistema de Homologación APF v5
# Copiar este archivo a .env y ajustar valores según sea necesario

# ==========================================
# Configuración de LLM
# ==========================================

# Proveedor de LLM (ollama o openai)
LLM_PROVIDER=ollama

# Configuración de Ollama (Local)
OLLAMA_BASE_URL=http://ollama:11434

# Modelo LLM a utilizar:
# - phi3.5 (2.2GB, ~4.5GB VRAM): Rápido pero menos preciso (~70-75% JSON válido)
# - qwen2.5:7b (4.7GB, ~6GB VRAM): RECOMENDADO - Mayor precisión (~85-90% JSON válido)
LLM_MODEL=qwen2.5:7b

# Configuración de OpenAI (Opcional - Solo para fallback híbrido)
# Descomenta y configura si quieres usar modo híbrido
# OPENAI_API_KEY=sk-your-api-key-here
# ENABLE_API_FALLBACK=false

# ==========================================
# Configuración de la Aplicación
# ==========================================

# Puerto de Streamlit
STREAMLIT_SERVER_PORT=8501
STREAMLIT_SERVER_ADDRESS=0.0.0.0

# Límites de recursos
MAX_UPLOAD_SIZE=200
MAX_CONCURRENT_ANALYSIS=1

# Configuración de caché
ENABLE_CACHE=true
CACHE_DIR=/app/cache
CACHE_TTL=3600

# Configuración de logs
LOG_LEVEL=INFO
LOG_FILE=/app/logs/apf.log

# ==========================================
# Configuración de Ollama (Avanzado)
# ==========================================

# Número de modelos cargados simultáneamente (1 para 6GB VRAM)
OLLAMA_MAX_LOADED_MODELS=1

# Procesamiento paralelo (1 para evitar OOM)
OLLAMA_NUM_PARALLEL=1

# Flash attention (reduce uso de VRAM)
OLLAMA_FLASH_ATTENTION=1

# ==========================================
# Configuración de Validación
# ==========================================

# Umbrales de validación (ajustar según necesidad)
CRITERIO_1_THRESHOLD=0.50
CRITERIO_2_THRESHOLD=0.60
CRITERIO_3_THRESHOLD=0.70

# Timeout para llamadas LLM (segundos)
LLM_TIMEOUT=120

# Reintentos en caso de error
LLM_MAX_RETRIES=2

# ==========================================
# Configuración de Seguridad
# ==========================================

# Desactivar telemetría de Streamlit
STREAMLIT_BROWSER_GATHER_USAGE_STATS=false

# ==========================================
# Variables de desarrollo (NO USAR EN PRODUCCIÓN)
# ==========================================

# DEBUG=false
# ENABLE_PROFILING=false
